<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="Doopec.Dds" type="Doopec.Dds.Config.DdsConfigurationSectionHandler, Doopec" />
    <section name="Doopec.Rtps" type="Doopec.Rtps.Config.RtpsConfigurationSectionHandler, Doopec" />
    <section name="DDS" type="Doopec.Configuration.DDSConfigurationSection, Doopec, Version=0.1.*, Culture=neutral, PublicKeyToken=null"/>
    <section name="RTPS" type="Doopec.Configuration.RTPSConfigurationSection, Doopec, Version=0.1.*, Culture=neutral, PublicKeyToken=null"/>
  </configSections>
<DDS xmlns="urn:Configuration">
    <!--
		This is just a minimal sample configuration file that shows how to declare
		the configuration sections.

		Because an XML Schema Definition (XSD) is generated for each configuration
		section, it should be trivial to edit these files because you have
		IntelliSense on the XML definition.
		-->
    <domains>
      <domain name="0" id="0">
        <transport name="defaultRtps"/>
        <qoS>
          <domainParticipantFactoryQos name="defaultDomainParticipantFactoryQoS">
            <entityFactory autoenableCreatedEntities="true"/>
          </domainParticipantFactoryQos>

          <domainParticipantQos name="defaultDomainParticipantQoS">
            <entityFactory autoenableCreatedEntities="true"/>
            <userData  value="userdata1"/>
          </domainParticipantQos>

          <topicQoS name="defaultTopicQoS">
            <topicData value=""/>
            <deadline  period="100"/>
            <durability  kind="VOLATILE"/>
          </topicQoS>

          <publisherQoS name="defaultPublisherQoS">
            <entityFactory autoenableCreatedEntities="true"/>
            <groupData value=""/>
            <partition value=""/>
            <presentation accessScope="INSTANCE" coherentAccess="true" orderedAccess="true"/>
          </publisherQoS>

          <subscriberQoS name="defaultSubscriberQoS">
            <entityFactory autoenableCreatedEntities="true"/>
            <groupData value=""/>
            <partition value=""/>
            <presentation accessScope="INSTANCE" coherentAccess="true" orderedAccess="true"/>
          </subscriberQoS>

          <dataWriterQoS name="defaultDataWriterQoS">
            <deadline period="1"/>
            <destinationOrder  kind="BY_SOURCE_TIMESTAMP"/>
            <durability  kind="VOLATILE"/>
            <durabilityService historyDepth="0" historyKind="KEEP_LAST" maxInstances="1" maxSamples="1" maxSamplesPerInstance="1" serviceCleanupDelay="100"/>
            <history kind="KEEP_LAST" depth="1"/>
            <latencyBudget duration="100"/>
            <lifespan duration="100"/>
            <liveliness kind="AUTOMATIC" leaseDuration="100"/>
            <ownership kind="SHARED"/>
            <ownershipStrength value="100"/>
            <reliability kind="BEST_EFFORT" maxBlockingTime="1000"/>
            <resourceLimits maxInstances="1" maxSamples="1" maxSamplesPerInstance="1"/>
            <transportPriority value="1"/>
            <userData value=""/>
            <writerDataLifecycle autodisposeUnregisteredInstances="true"/>
          </dataWriterQoS>

          <dataReaderQoS name="defaultDataReaderQoS">
            <deadline period="1"/>
            <destinationOrder  kind="BY_SOURCE_TIMESTAMP"/>
            <durability  kind="VOLATILE"/>
            <history kind="KEEP_LAST" depth="1"/>
            <latencyBudget duration="100"/>
            <liveliness kind="AUTOMATIC" leaseDuration="100"/>
            <ownership kind="SHARED"/>
            <reliability kind="BEST_EFFORT" maxBlockingTime="1000"/>
            <resourceLimits maxInstances="1" maxSamples="1" maxSamplesPerInstance="1"/>
            <readerDataLifecycle autopurgeDisposedSamplesDelay="1000" autopurgeNowriterSamplesDelay="1000"/>
            <timeBasedFilter minimumSeparation="1000"/>
            <userData value=""/>
          </dataReaderQoS>
        </qoS>
      </domain>
    </domains>
    <logLevel levelMin="DEBUG" levelMax="FATAL"/>
  </DDS>
  <RTPS xmlns="urn:Configuration">
    <!--
		This is just a minimal sample configuration file that shows how to declare
		the configuration sections.

		Because an XML Schema Definition (XSD) is generated for each configuration
		section, it should be trivial to edit these files because you have
		IntelliSense on the XML definition.
		-->
    <transports>
      <transport name="defaultRtps" type="namespace.class, assembly">
        <ttl val="1"/>
        <discovery name="defaultDiscovery">
          <resendPeriod val="30000000"/>
          <useSedpMulticast val="true"/>
          <portBase val="7400"/>
          <domainGain val="250"/>
          <participantGain val="2"/>
          <offsetMulticast val="0"/>
          <offsetUnicast val="10"/>
          <unicastLocatorList val="localhost:7777"/>
          <multicastLocatorList val="239.255.0.1"/>
        </discovery>
      </transport>
    </transports>
  </RTPS>
  
  <Doopec.Dds>
    <!--<add key="TransportEngine" value="Doopec.Rtps.SharedMem.FakeEngine, Doopec" />-->
    <add key="TransportEngine" value="Doopec.Rtps.RtpsTransport.RtpsEngine, Doopec" />
    <add key="DefaultDomainId" value="1" />

    <add key="DefaultDomainQoS" value="defaultDomain" />
    <add key="DefaultTopicQoS" value="defaultTopic" />
    <add key="DefaultDataWriterQoS" value="defaultDataWriter" />
    <add key="DefaultDataReaderQoS" value="defaultDataReader" />

    <Doopec.Dds.QoS.Domain name="defaultDomain">
      <!-- Default user data is not set -->
      <add key="userData" value=""/>
      <!-- Default autoenable created entities is true -->
      <add key="autoEnableCreatedEntities" value="true"/>
    </Doopec.Dds.QoS.Domain>

    <Doopec.Dds.QoS.Topic name="defaultTopic">
      <!--Default user data is not set-->
      <add key="topicData" value=""/>
      <add key="durability" value="VOLATILE, 0"/>
      <add key="realibility" value="BEST_EFFORT, Infinity"/>
    </Doopec.Dds.QoS.Topic>

    <!--<Doopec.Dds.DataWriter name="defaultRtpsWriter">
      <add key="unicastLocatorList" value="udp://224.0.1.111:9999" />
    </Doopec.Dds.DataWriter>-->

    <Doopec.Dds.QoS.DataWriter name="defaultDataWriter">
      <add key="durability" value="VOLATILE, 0"/>
      <add key="realibility" value="RELIABLE, 100"/>
    </Doopec.Dds.QoS.DataWriter>

    <Doopec.Dds.QoS.DataReader name="defaultDataReader">
      <add key="durability" value="VOLATILE, 0"/>
      <add key="realibility" value="RELIABLE, 100"/>
    </Doopec.Dds.QoS.DataReader>
  </Doopec.Dds>

  <Doopec.Rtps>
    <Doopec.Rtps.SPDP>
      <!-- A comma separated list of URIs, that will be used to start listeners for discovery. -->
      <add key="unicastLocatorList" value="udp://localhost" />
      <add key="multicastLocatorList" value="udp://239.255.0.1" />
      <!--SPDP writers periodical announcement rate, in milliseconds-->
      <add key="resendDataPeriod" value="3000" />
      <!--The SPDP built-in Endpoints are configured using well-known ports (see Section 8.5.3.4)-->
      <WellKnownPorts portBase="7400" domainIdGain="250" participantIdGain="2" offsetd0="0" offsetd1="10" offsetd2="1" offsetd3="11" />
    </Doopec.Rtps.SPDP>
    <Doopec.Rtps.Writer>
      <add key="pushMode" value="True" />
      <add key="heartbeatPeriod" value="5000" />
      <add key="nackResponseDelay" value="200" />
      <add key="nackSuppressionDuration" value="0" />
    </Doopec.Rtps.Writer>
    <Doopec.Rtps.Reader>
      <add key="heartbeatResponseDelay" value="1000" />
      <add key="heartbeatSuppressionDuration" value="0" />
    </Doopec.Rtps.Reader>
  </Doopec.Rtps>
  <appSettings>
    <add key="org.omg.dds.serviceClassName" value="Doopec.Dds.Core.BootstrapImpl, Doopec" />
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.1" />
  </startup>
</configuration>